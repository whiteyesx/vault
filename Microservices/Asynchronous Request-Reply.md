Разделяет обработку на backend от frontend, где обработка должна быть асинхронной, но клиент должен получать четкий ответ.

## Контекст и проблема

![[Pasted image 20240602204854.png]]

## Проблемы и соображения

* HTTP 202 ответ должен отображать расположение и частоту запроса с которыми клиент должен пытаться получить ресурс. Он должен содержать дополнительные заголовки:

| Header      | Description                                                            | Notes                                                                    |
| ----------- | ---------------------------------------------------------------------- | ------------------------------------------------------------------------ |
| Location    | URL по которому клиент должен обращаться для получения статуса ответа. | URL может быть SAS токеном используемым в паттерне Valet Key.            |
| Retry-After | Оценочное время через которое необходимо выполнять запрос              | Заголовок предназначен для предотвращения перегрузки backend'a клиентом. |
* Если статусный ендпоинт перенаправляет на ресурс после заврешения, то HTTP 302 или 303 - подходящие коды ответов.
* Если происходит ошибка при обработке, то необходимо возвращать HTTP 4xx с URL ресурса указанного в заголовке **Location**.


## Когда использовать?

* Когда клиентский код не может предоставить callback-endpoint или использование долгоживущих соединений добавляет дополнительную сложность.
* Сервис использует только HTTP вызовы, а backend не может выполнить callback из за ограничений firewall.
* Сервис должен быть интегрирован со старыми системами, которые не поддерживают Websockets / Webhooks.

## Когда может не подойти?

* Сервис УЖЕ построен на асинхронных оповещениях
* Ответ должен стримится клиенту. (Видео / Аудио)
* Сервису нужно получать множество результатов и задержка его получения - критична?
* Есть возможность подключить Websockets / Webhooks или настроить Firewall.